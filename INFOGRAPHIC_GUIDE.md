# SQL Agent 인포그래픽 기능 가이드

## 🎨 새로운 기능

기존 SQL Agent에 **인포그래픽 자동 생성** 기능이 추가되었습니다!

## 📁 파일 구조

- `src/sql_agent_information.ipynb` - 기존 SQL Agent
- `src/sql_agent_with_infographics.ipynb` - **새로운 인포그래픽 기능 포함**

## 🚀 사용 방법

### 1. 환경 설정

```bash
# 의존성 설치 (이미 완료됨)
uv sync
```

### 2. 노트북 실행

1. `src/sql_agent_with_infographics.ipynb` 파일을 열기
2. 모든 셀을 순서대로 실행
3. 마지막 셀에서 대화형 SQL Agent 시작

### 3. 인포그래픽 생성

1. SQL 질문을 입력
2. Agent가 답변을 제공
3. "이 결과를 인포그래픽으로 생성하시겠습니까? (y/n):" 프롬프트에서 `y` 입력
4. 자동으로 적절한 차트 생성 및 저장

## 📊 지원하는 차트 유형

### 자동 선택 로직

- **막대 차트**: 카테고리 + 숫자 데이터가 있을 때
- **파이 차트**: 카테고리 데이터만 있을 때
- **테이블**: 기타 모든 경우

### 예시 질문들

```
- 각 카테고리별 영화 수를 알려주세요 → 파이 차트
- 가장 높은 매출을 기록한 영화 카테고리 5개 → 막대 차트
- 고객별 총 결제 금액 상위 10명 → 막대 차트
- 배우별 출연 영화 수 → 막대 차트
```

## 📁 저장 위치

생성된 인포그래픽은 `infographics/` 폴더에 저장됩니다:

- `bar_chart_YYYYMMDD_HHMMSS.png` - 막대 차트
- `pie_chart_YYYYMMDD_HHMMSS.png` - 파이 차트
- `table_YYYYMMDD_HHMMSS.png` - 테이블

## 🎯 주요 특징

- **자동 차트 선택**: 데이터 타입에 따라 최적의 시각화 자동 선택
- **고품질 이미지**: 300 DPI로 저장되어 인쇄 품질
- **한글 지원**: 한글 폰트 자동 설정
- **데이터 제한**: 성능을 위해 상위 10-20개 데이터만 표시
- **타임스탬프**: 파일명에 생성 시간 포함으로 중복 방지

## 🔧 커스터마이징

필요에 따라 다음을 수정할 수 있습니다:

- 차트 색상 (`plt.cm.viridis`, `plt.cm.Set3`)
- 표시할 데이터 개수 (현재 10개)
- 이미지 크기 (`figsize`)
- 저장 품질 (`dpi=300`)

## 🚨 주의사항

- 복잡한 쿼리 결과는 테이블 형태로 표시됩니다
- 매우 큰 데이터셋은 자동으로 상위 N개만 표시됩니다
- 한글 폰트가 없는 환경에서는 기본 폰트로 대체됩니다
